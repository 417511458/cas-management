<mat-radio-group [(ngModel)]="type" (change)="changeType()">

  <mat-radio-button [value]="TYPE.DEFAULT">
    <ng-container i18n="services.form.label.uap.default">
      {{ messages.services_form_label_uap_default }}
    </ng-container>
  </mat-radio-button>

  <mat-radio-button [value]="TYPE.ANONYMOUS">
    <ng-container i18n="services.form.label.uap.anon">
      {{ messages.services_form_label_uap_anon }}
    </ng-container>
  </mat-radio-button>

  <mat-radio-button [value]="TYPE.PRINCIPAL_ATTRIBUTE">
    <ng-container i18n="services.form.label.uap.principleAtt">
      {{ messages.services_form_label_uap_principleAtt }}
    </ng-container>
  </mat-radio-button>

</mat-radio-group>

<ng-container *ngIf="type == TYPE.ANONYMOUS">
  <app-input field="salt" [change]="data.service.usernameAttributeProvider.persistentIdGenerator"
             [orig]="data.diff.usernameAttributeProvider.persistentIdGenerator">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.uap.saltSetting">
        {{ messages.services_form_label_uap_saltSetting }}
      </mat-placeholder>
      <input matInput required
             [(ngModel)]="data.service.usernameAttributeProvider.persistentIdGenerator.salt">
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
    <mat-icon appHelp
             i18n-myTooltip="services.form.tooltip.uap.saltSetting"
             [matTooltip]="messages.services_form_tooltip_uap_saltSetting">
    </mat-icon>
  </app-input>

  <app-input field="attribute" [change]="data.service.usernameAttributeProvider.persistentIdGenerator"
             [orig]="data.service.usernameAttributeProvider.persistentIdGenerator">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.uap.anonAttribute">
        {{ messages.services_form_label_uap_anonAttribute }}
      </mat-placeholder>
      <input matInput [matAutocomplete]="auto"
             [(ngModel)]="data.service.usernameAttributeProvider.persistentIdGenerator.attribute">
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
    <mat-icon appHelp
             i18n-myTooltip="services.form.tooltip.uap.anonAttribute"
             [matTooltip]="messages.services_form_tooltip_uap_anonAttribute">
    </mat-icon>
  </app-input>
</ng-container>

<ng-container *ngIf="type == TYPE.PRINCIPAL_ATTRIBUTE">

  <app-input field="usernameAttribute" [change]="data.service.usernameAttributeProvider"
             [orig]="data.diff.usernameAttributeProvider">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.uap.usernameAttribute">
        {{ messages.services_form_label_uap_usernameAttribute }}
      </mat-placeholder>
      <input matInput required [matAutocomplete]="auto"
             [(ngModel)]="data.service.usernameAttributeProvider.usernameAttribute">
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
    <mat-icon appHelp
             i18n-matTooltip="services.form.tooltip.uap.usernameAttribute"
             [matTooltip]="messages.services_form_tooltip_uap_usernameAttribute">
    </mat-icon>
  </app-input>

  <app-input field="encryptUserName" [change]="data.service.usernameAttributeProvider"
             [orig]="data.diff.usernameAttributeProvider">
    <mat-checkbox [(ngModel)]="data.service.usernameAttributeProvider.encryptUserName">
      <ng-container i18n>
        Encrypt Username
      </ng-container>
    </mat-checkbox>
    <mat-icon appHelp
             i18n-matTooltip="encpytUsername"
             matTooltip="If checked the username attribute will be encrypted using the defined public key for the service">
    </mat-icon>
    <mat-hint align="end">
      <app-hint></app-hint>
    </mat-hint>
  </app-input>

  <app-input field="canonicalizationMode" [change]="data.service.usernameAttributeProvider"
             [orig]="data.diff.usernameAttributeProvider">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.uap.canonicalizationMode">
        {{ messages.services_form_label_uap_canonicalizationMode }}
      </mat-placeholder>
      <mat-select [(ngModel)]="data.service.usernameAttributeProvider.canonicalizationMode">
        <mat-option *ngFor="let opt of data.formData.canonicalizationModes" [value]="opt">
          {{ opt }}
        </mat-option>
      </mat-select>
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
  </app-input>

</ng-container>

<mat-autocomplete style="width:300px" #auto="matAutocomplete">
  <mat-option *ngFor="let opt of formData.availableAttributes" [value]="opt">{{ opt }}</mat-option>
</mat-autocomplete>
