<app-input field="enabled"
           [change]="data.service.attributeReleasePolicy.consentPolicy"
           [orig]="data.diff.attributeReleasePolicy.consentPolicy">
  <mat-checkbox [(ngModel)]="data.service.attributeReleasePolicy.consentPolicy.enabled">
    <ng-container i18n="services.form.label.attrRelease.constent.enabled">
      {{ messages.services_form_label_attrRelease_consent_enabled }}
    </ng-container>
    <mat-icon appHelp
             i18n-matTooltip="services.form.tooltip.attrRelease.consent.enabled"
             [matTooltip]="messages.services_form_tooltip_attrRelease_consent_enabled">
    </mat-icon>
  </mat-checkbox>
</app-input>

<ng-container *ngIf="data.service.attributeReleasePolicy.consentPolicy.enabled && !isEmpty( formData.availableAttributes )">
  <app-input field="excludeAttributes"
             [change]="data.service.attributeReleasePolicy.consentPolicy"
             [orig]="data.diff.attributeReleasePolicy.consentPolicy">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.attrRelease.consent.excludedAttributes">
        {{ messages.services_form_label_attrRelease_consent_excludedAttributes }}
      </mat-placeholder>
      <mat-select multiple
                  [(ngModel)]="data.service.attributeReleasePolicy.consentPolicy.excludedAttributes">
        <mat-option *ngFor="let opt of formData.availableAttributes" [value]="opt">
          {{ opt }}
        </mat-option>
      </mat-select>
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
    <mat-icon appHelp
             i18n-matTooltip="services.form.tooltip.attrRelease.consent.excludedAttributes"
             [matTooltip]="messages.services_form_tooltip_attrRelease_consent_excludedAttributes">
    </mat-icon>
  </app-input>
</ng-container>

<ng-container *ngIf="data.service.attributeReleasePolicy.consentPolicy.enabled && !isEmpty( formData.availableAttributes )">
  <app-input field="includeOnlyAttributes"
             [change]="data.service.attributeReleasePolicy.consentPolicy"
             [orig]="data.diff.attributeReleasePolicy.consentPolicy">
    <mat-form-field class="textInput">
      <mat-placeholder i18n-placeholder="services.form.label.attrRelease.consent.includeOnlyAttributes">
        {{ messages.services_form_label_attrRelease_consent_includeOnlyAttributes }}
      </mat-placeholder>
      <mat-select multiple
                  [(ngModel)]="data.service.attributeReleasePolicy.consentPolicy.includeOnlyAttributes">
        <mat-option *ngFor="let opt of formData.availableAttributes" [value]="opt">
          {{ opt }}
        </mat-option>
      </mat-select>
      <mat-hint align="end">
        <app-hint></app-hint>
      </mat-hint>
    </mat-form-field>
    <mat-icon appHelp
             i18n-matTooltip="services.form.tooltip.attrRelease.consent.includeOnlyAttributes"
             [matTooltip]="messages.services_form_tooltip_attrRelease_consent_includeOnlyAttributes">
    </mat-icon>
  </app-input>
</ng-container>
